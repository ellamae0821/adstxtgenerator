<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Ads.txt</title>
</head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<body>



<div class="container">
    <div class="row">
        <div class="col-sm-12">
        	<h1 class="display-3">Ads.txt Generator</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <p class="font-weight-bold">Step 1-Enter WOPD PUBLISHER ID</p>
            <label> WOPDPUBID: <input type="number" size="3" maxlength="5" placeholder="000" name="WOPDPUBID" id="pubID" onchange="clearError()"> </label> <br>
            <div>   
                <br>
                <form>
                    <p class="font-weight-bold">Step 2- Choose if applicable</p>
                <!-- <textarea class="form-control" aria-label="With textarea" id="adswizzPrivate" rows="7"></textarea><br/> -->
<!--                     <label><input type="radio" name="kjlh" id="generic"> adswizz.com, kjlh, RESELLER </label> <br>
                    <label><input type="radio" name="wgn" id="generic"> adswizz.com, wgnradio, RESELLER</label> <br>
                    <label><input type="radio" name="federated" id="generic"> adswizz.com, federatedmedia, RESELLER</label> <br>
                    <label><input type="radio" name="sinclair" id="generic"> adswizz.com, sinclair, RESELLER</label> <br>
                    <label><input type="radio" name="eldorado" id="generic"> adswizz.com, eldorado, RESELLER</label> <br>
                    <label><input type="radio" name="redapplemedia" id="generic"> adswizz.com, redapplemedia, RESELLER</label> <br> -->

                    <label><input type="radio" id="kjlh" name="special" value="adswizz.com, kjlh, RESELLER"> adswizz.com, kjlh, RESELLER </label> <br>
                    <label><input type="radio" id="wgn" name="special" value="adswizz.com, wgnradio, RESELLER"> adswizz.com, wgnradio, RESELLER</label> <br>
                    <label><input type="radio" id="sinclair" name="special" value="adswizz.com, sinclair, RESELLER"> adswizz.com, sinclair, RESELLER</label> <br>
                    <label><input type="radio" id="eldorado" name="special" value="adswizz.com, eldorado, RESELLER"> adswizz.com, eldorado, RESELLER</label> <br>
                    <label><input type="radio" id="redapplemedia" name="special" value="adswizz.com, redapplemedia, RESELLER"> adswizz.com, redapplemedia, RESELLER</label> <br>                </form>
                
            </div><br>
            <input class="btn btn-primary" type="submit" id="submit" onclick="generateGen()">
            <input class="btn btn-primary" type="submit" id="restart" value="Clear" onclick="clearChecked()"><br>
            <span style="display:none;color:red" id="error"> Please enter WOPD PUB ID! </span>
            <p id="demo"></p>

        </div>
        <div class="col-sm-8">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">Ads.txt &<br>App-ads.txt</span>
                </div>
               
                <textarea class="form-control" aria-label="With textarea" id="output" rows="21" onchange="checkText()"></textarea><br/>
                
            </div>
            <div>
                <a id="ads" style="display:none">Download Ads.txt</a>
                <a id="app" style="display:none">Download App-ads.txt</a> 
            </div>

        </div>
    </div>
</div>



<script type="text/javascript">
    
    var wopdpubidVal = document.getElementById('pubID').value;
    var outputAreaVal = document.getElementById("output").value;
    



    var outputArea = document.getElementById('output');


    function checkText(){
        var outputAreaVal = document.getElementById("output").value;
        console.log(outputAreaVal);
        document.getElementById("demo").innerHTML = outputAreaVal;
        const ads_link = document.getElementById("ads");
        ads_link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(outputAreaVal));
        ads_link.setAttribute('download', 'Ads'+'.txt');
        const app_link = document.getElementById("app");
        app_link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(outputAreaVal));
        app_link.setAttribute('download', 'app-ads'+'.txt');
    }



    var adswizzVal =    [
                            "adswizz.com, kjlh, RESELLER",
                            "adswizz.com, wgnradio, RESELLER",
                            "adswizz.com, sinclair, RESELLER",
                            "adswizz.com, eldorado, RESELLER",
                            "adswizz.com, redapplemedia, RESELLER"
                        ];
    // document.getElementById("adswizzPrivate").value = adswizzVal.join("\n");
    var genericVal = [
                            "wideorbit.com, , DIRECT, 009ac71611fe32ff",                            
                            "rubiconproject.com, 21134, RESELLER, 0bfd66d529a55807",
                            "targetspot.com, 29, RESELLER, feb28ed826dcf532",
                            "rubiconproject.com, 16418, RESELLER, 0bfd66d529a55807",
                            "rubiconproject.com, 9753, RESELLER, 0bfd66d529a55807",
                            "rubiconproject.com, 9755, RESELLER, 0bfd66d529a55807",
                            "spotxchange.com, 211833, RESELLER, 7842df1d2fe2db34",
                            "spotx.tv, 211833, RESELLER, 7842df1d2fe2db34",
                            "appnexus.com, 1577, RESELLER, f5ab79cb980f11d1",
                            "appnexus.com, 7265, RESELLER, f5ab79cb980f11d1",
                            "tritondigital.com, 44733, RESELLER, 19b4454d0b87b58b",
                            "adswizz.com, targetspot, RESELLER",
                            "audio.ad, 30305, RESELLER",
                            "tritondigital.com, 28563, RESELLER, 19b4454d0b87b58b",
                            "adswizz.com, adwaveus, RESELLER",
                            "adswizz.com, otherwortb, RESELLER",
                            "contextweb.com, 560724, RESELLER, 89ff185a4c4e857c",
                            "loopme.com, 11382, RESELLER, 6c8d5f95897a5a3b",
                            "rubiconproject.com, 20744, RESELLER, 0bfd66d529a55807",
                            "openx.com, 540298543, RESELLER, 6a698e2ec38604c6"
                    ];

    var genericVal_2 = [ "adswizz.com, , RESELLER" ];

    function addStr(str, index, stringToAdd){
      return str.substring(0, index) + stringToAdd + str.substring(index, str.length);
    }


    function generateGen(){

        var wopdpubidVal = document.getElementById('pubID').value;
        var value_output = document.getElementById("output").value; 
        var selectedRadio =  $("input[type='radio'][name='special']:checked").length;
        var selectedRadioVal =  $("input[type='radio'][name='special']:checked").val();
        var stringAds = genericVal.join("\r\n");
        var stringAds2 = genericVal_2.join("\r\n");

       
        var resGen = addStr(stringAds, 15, wopdpubidVal);
        var resGen2 = addStr(stringAds2, 13, wopdpubidVal);
        var result_Generic = resGen +"\r\n"+ resGen2;

        // console.log(selectedRadio);
        // console.log(result_Generic);




        if (wopdpubidVal !== "" && selectedRadio > 0){
            var finalOutput =  result_Generic + "\r\n" + selectedRadioVal
            // console.log("I went  route 1");
        }    
        else if (wopdpubidVal !== "" && selectedRadio === 0 ){
            var finalOutput =  result_Generic 
            // console.log("I went  route 2");
        }
        else {
            var finalOutput =  "" ;
           document.getElementById('error').style.display = "block";
        }

      
        document.getElementById("output").innerHTML = finalOutput;       

        const ads_link = document.querySelector('a');
        ads_link.style.display = "block";
        ads_link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(finalOutput));
        ads_link.setAttribute('download', 'ads'+'.txt');
        const app_link = document.getElementById("app");
        app_link.style.display = "block";
        app_link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(finalOutput));
        app_link.setAttribute('download', 'app-ads'+'.txt');

   }
            
    function clearError(){
        document.getElementById('error').style.display = "none";
        console.log("error should be gone");
    }

    function clearChecked() {
       location.reload()
     
    }


    
    

</script>
</script>
</body>
</html>

